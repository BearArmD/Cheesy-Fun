let balloons = [];
let confetti = [];
let music;
let img; // Declare the image variable

function preload() {
    soundFormats('mp3');
    music = loadSound('audio/jazzyfrenchy.mp3'); // Load the music
    img = loadImage('images/cheesy.png'); // Load the image
}

function setup() {
    createCanvas(windowWidth, windowHeight);

    // Spawn balloons and confetti
    for (let i = 0; i < 10; i++) {
        setTimeout(() => {
            balloons.push(new Balloon());

            // Start music when the first balloon is added
            if (i === 0 && !music.isPlaying()) {
                setTimeout(() => {
                    music.play();
                }, 270); // Delay of 0.27 seconds before playing music
            }
        }, i * 500); // Stagger balloon release
    }

    for (let i = 0; i < 50; i++) {
        confetti.push(new Confetti());
    }
}

function draw() {
    background(255);
    
    // Draw balloons and confetti
    for (let b of balloons) {
        b.update();
        b.display();
    }
    for (let c of confetti) {
        c.update();
        c.display();
    }
}

// Balloon class (same as before)
class Balloon {
    constructor() {
        this.x = random(width);
        this.y = height;
        this.size = random(40, 60);
        this.speed = 2;
    }

    update() {
        this.y -= this.speed;
    }

    display() {
        fill(255, 0, 0);
        ellipse(this.x, this.y, this.size, this.size * 1.5);
    }
}

// Confetti class (same as before)
class Confetti {
    constructor() {
        this.x = random(width);
        this.y = random(height);
        this.size = random(5, 15);
        this.speed = 3;
    }

    update() {
        this.y += this.speed;
    }

    display() {
        fill(random(255), random(255), random(255));
        rect(this.x, this.y, this.size, this.size);
    }
}
